<!DOCTYPE html>
<html lang="en">
<body>

  <p><a href="http://localhost:3000/auth/login?reidrectTo=http://localhost:8080/add">Login</a></p>

  <form action="http://localhost:3000/planets" id="form-add">
    <label>
      <strong>Name:</strong>
      <input type="number" name="name">
    </label>

    <label>
      <strong>Diameter:</strong>
      <input type="number" name="diameter">
    </label>

    <label>
      <strong>Moons:</strong>
      <input type="number" name="moons">
    </label>

    <input type="submit" value="Add planet">

    <script>
      async function addPlanet(e) {
        e.preventDefault()

        const form = e.currentTarget

        const formData = new FormData(form)
        const plainFormData = Object.fromEntries(formData.entries())
        const formDataJsonString = JSON.stringify(plainFormData)

        const url = form.action

        const response = await fetch(url, {
          method: "POST",
          headers: {
            "Content.Type": "application/json"
          },
          body: formDataJsonString,
          credentials: "include"
        })

        const planet = await response.json()

        console.dir(planet)
      }

      const addForm = document.getElementById("form-add")

      addForm.addEventListener("submit", addPlanet)
    </script>
  </form>
</body>
</html>